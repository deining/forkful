---
title:    "Clojure: 「テストの書き方」"
keywords: ["Clojure"]
---

{{< edit_this_page >}}

## Why

なぜテストを書くのか？ソフトウェア開発者にとって、テストは非常に重要です。テストを書くことにより、コードの品質を向上させ、バグを減らし、信頼性を確保することができます。また、テストを書くことでコードの網羅的なテストを実施することができ、将来的な変更に対しても影響を最小限に抑えることができます。

## How To

テストを書くためには、Clojureで提供されているテスティングフレームワークであるclojure.testを使用します。まず、テストするための機能やコンポーネントを含む名前空間を作成します。その後、テストを含む名前空間を別のファイルに作成し、``(ns namepsace-name-test (:require [clojure.test :refer :all]))``のようにclojure.testを使用することを宣言します。

```
(ns math.core-test
  (:require [clojure.test :refer :all]
            [math.core :refer :all]))

(deftest add-test
  (testing "2つの数値を足し合わせるテスト"
    (is (= 10 (add 6 4))))
  (testing "負の数値を含む場合のテスト"
    (is (= -2 (add 2 -4))))
  (testing "0を引数として与えられた場合のテスト"
    (is (= 5 (add 5 0)))))
```

テスト内容が構築されたら、コマンドラインで``lein test``を実行します。テストがすべてパスした場合は、``Ran x tests containing x assertions``というメッセージが表示されます。

## Deep Dive

テストを書く際にはいくつかのポイントに注意する必要があります。

まず、1つのテストは1つの機能のみをテストするようにしましょう。例えば、``add``が数値の足し合わせのみを行う関数であれば、数値の掛け合わせをテストすることは避けましょう。

また、テストの明確性を保つために、テストの名称を表現力のあるものにしましょう。テストコードを見るだけで、そのテストが何をテストしているのかを理解できるようにすることが重要です。

さらに、テストの網羅性を保つためには、異なるスコープのテストを書くようにしましょう。例えば、関数の正常な動作だけでなく、エラーハンドリングや境界値などもテストするようにします。

最後に、テストを頻繁に実行し、コードの変更に合わせてテストも更新することが重要です。テストが古くなっていると、コードの変更に対応していない可能性があります。

## See Also

- [Clojureのテスティングフレームワーク - clojure.test](https://clojure.org/guides/test)
- [テスト駆動開発入門 - Clojure](https://clojure.or.jp/doc/tdd/tdd.html)