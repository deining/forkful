---
date: 2024-01-26 03:43:10.488564-07:00
description: ''
lastmod: '2024-04-05T22:50:56.263937-06:00'
model: gpt-4-0125-preview
summary: "\u65B9\u6CD5\uFF1A \u6614\u306E\u65E5\u3005\u306B\u306F\u3001Bash\u30B9\u30AF\
  \u30EA\u30D7\u30C8\u3067\u6570\u5B66\u306E\u9B54\u6CD5\u3092\u884C\u3046\u305F\u3081\
  \u306E`bc`\u3084`printf`\u306F\u3042\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\
  \u53E4\u682A\u9054\u306F\u5916\u90E8\u30C4\u30FC\u30EB\u306B\u983C\u3063\u305F\u308A\
  \u3001\u5DE7\u5999\u306A\u56DE\u907F\u7B56\u3092\u8003\u3048\u51FA\u3055\u306A\u3051\
  \u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u4ECA\u3067\u306F\
  \u3001`bc`\u3092\u4F7F\u3063\u3066\u7CBE\u5EA6\u9AD8\u3044\u6570\u5B66\u304C\u3067\
  \u304D\u307E\u3059\u3002\u305F\u3060\u3057\u3001`bc`\u306F\u30C7\u30D5\u30A9\u30EB\
  \u30C8\u3067\u4E38\u3081\u308B\u308F\u3051\u3067\u306F\u306A\u304F\u3001\u5207\u308A\
  \u6368\u3066\u307E\u3059\u3002\u30B9\u30B1\u30FC\u30EB\u90E8\u5206\u306F\u5C0F\u6570\
  \u70B9\u306E\u52D5\u4F5C\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002 \u4EE3\u66FF\u6848\
  \u306F\uFF1F `bc`\u306B\u5207\u308A\u66FF\u3048\u305A\u306B`awk`\u3092\u4F7F\u3063\
  \u3066\u4E38\u3081\u305F\u308A\u3001\u3088\u308A\u91CD\u3044\u6570\u5B66\u304C\u5FC5\
  \u8981\u306A\u5834\u5408\u306B\u306F`perl`\u3067\u624B\u3092\u52D5\u304B\u3059\u3053\
  \u3068\u304C\u3067\u304D\u307E\u3059\u3002\u30DE\u30BE\u30D2\u30B9\u30C6\u30A3\u30C3\
  \u30AF\u306A\u5834\u5408\u306F\u3001\u4F8B\u3048\u3070\u3001\u53CD\u5FA9\u7684\u306A\
  \u6587\u5B57\u5217\u64CD\u4F5C\u3067\u7D14\u7C8B\u306ABash\u3092\u4F7F\u3063\u3066\
  \u307F\u3066\u304F\u3060\u3055\u3044 \u2013 \u3067\u3082\u3001\u306A\u305C\u3067\
  \u3059\u304B\uFF1F \u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001`bc`\u306F\u4E38\
  \u3081\u308B\u3060\u3051\u3067\u306F\u306A\u304F\u3001\u305F\u304F\u3055\u3093\u306E\
  \u6570\u5B66\u7684\u306A\u4F5C\u696D\u3092\u884C\u3044\u307E\u3059 \u2013 \u30B9\
  \u30B1\u30FC\u30EB\u8ABF\u6574\u3001\u6B63\u5F26\u3001\u5E73\u65B9\u6839\u3001\u540D\
  \u524D\u3092\u6319\u3052\u3066\u304F\u3060\u3055\u3044\u3002`printf`\u306B\u95A2\
  \u3057\u3066\u306F\u3001\u30C6\u30AD\u30B9\u30C8\u306E\u30D5\u30A9\u30FC\u30DE\u30C3\
  \u30C8\u306B\u95A2\u3059\u308B\u3082\u306E\u304C\u591A\u3044\u3067\u3059\u304C\u3001\
  \u6570\u5024\u3092\u4E38\u3081\u308B\u3053\u3068\u3082\u3067\u304D\u308B\u306E\u3067\
  \u3001\u6587\u53E5\u3092\u8A00\u3046\u3053\u3068\u306F\u3042\u308A\u307E\u305B\u3093\
  \u3002"
title: "\u6570\u5024\u306E\u4E38\u3081\u51E6\u7406"
weight: 13
---

## 方法：
ここにBashでの丸め方の要点があります：

```Bash
# 'floor'を使って切り捨てる
echo "scale=0; 3.49/1" | bc

# 'ceiling'を使って切り上げる
echo "scale=0; 3.01/1" | bc -l

# printfを使って最も近い整数に丸める
printf "%.0f\n" 3.49

# bcを使って最も近い整数に丸めるトリック
echo "(3.49+0.5)/1" | bc
```

ターミナルから直接のサンプル出力：

```
3  # 切り捨てられた（floor）
4  # 切り上げられた（ceiling）
3  # 最も近い数に丸められた（printfを使って）
3  # 最も近い数に丸められた（bcを使って）
```

## 深堀り
昔の日々には、Bashスクリプトで数学の魔法を行うための`bc`や`printf`はありませんでした。古株達は外部ツールに頼ったり、巧妙な回避策を考え出さなければなりませんでした。今では、`bc`を使って精度高い数学ができます。ただし、`bc`はデフォルトで丸めるわけではなく、切り捨てます。スケール部分は小数点の動作を設定します。

代替案は？ `bc`に切り替えずに`awk`を使って丸めたり、より重い数学が必要な場合には`perl`で手を動かすことができます。マゾヒスティックな場合は、例えば、反復的な文字列操作で純粋なBashを使ってみてください – でも、なぜですか？

詳細については、`bc`は丸めるだけではなく、たくさんの数学的な作業を行います – スケール調整、正弦、平方根、名前を挙げてください。`printf`に関しては、テキストのフォーマットに関するものが多いですが、数値を丸めることもできるので、文句を言うことはありません。

## 参照
もっと詳しく知りたい方へ：

- GNU `bc` マニュアル：https://www.gnu.org/software/bc/manual/html_mono/bc.html
- Bash `printf` コマンド：https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#index-printf
- AWK ユーザーズガイド（丸めやその他のテキスト処理について）：https://www.gnu.org/software/gawk/manual/gawk.html
- より多くのBash数学、スクリプティング、そして数値トリック：https://mywiki.wooledge.org/BashFAQ/022
