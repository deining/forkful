---
title:                "Bash: ディレクトリが存在するかどうかを確認する"
simple_title:         "ディレクトリが存在するかどうかを確認する"
programming_language: "Bash"
category:             "Bash"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ja/bash/checking-if-a-directory-exists.md"
---

{{< edit_this_page >}}

## なぜ

ディレクトリが存在するかどうかをチェックすることは、Bashプログラミングの基本的なスキルです。プログラマーは頻繁にファイルやディレクトリを作成、編集、削除するため、その前に必ず確認する必要があります。また、既存のファイルやディレクトリがあるかどうかを確認することで、プログラムの安全性を保つこともできます。

## ハウツー

ディレクトリが存在するかどうかをチェックするために使用できる2つの主要な方法があります。最初の方法は、 `test` コマンドを使用する方法です。例えば、 `test -d` を使用することで、引数として渡されたパスがディレクトリであるかどうかをチェックできます。

```Bash
# `test` コマンドを使用したディレクトリの存在チェックの例
test -d /home/user/Documents
```

もう一つの方法は、 `if` 文を使用する方法です。以下の例では、 `if` 文内で `[ -d ]` を使用して、引数として渡されたパスがディレクトリであるかどうかをチェックしています。

```Bash
# `if` 文を使用したディレクトリの存在チェックの例
if [ -d /home/user/Documents ]
then
  echo "ディレクトリが存在します"
else
  echo "ディレクトリが存在しません"
fi
```

上記の2つの方法は、どちらもディレクトリが存在するかどうかを確認するための基本的な方法です。さらに、コマンドや関数を使用して、条件分岐やループの中でディレクトリの存在をチェックすることもできます。

## ディープダイブ

ディレクトリの存在をチェックする際に考慮すべきことがあります。まず、 `test` コマンドで使用される演算子 `-d` は、引数がディレクトリまたはファイルであるかどうかをチェックすることができます。したがって、ファイルが存在している場合でも、ディレクトリでない限り、演算子は `false` を返します。

また、制御構造の中でディレクトリの存在をチェックする場合には、注意が必要です。例えば、以下のようなコードがあった場合、

```Bash
# ディレクトリの存在をチェックするコードの例
if [ -d /home/user/Documents ]
then
  rm -r /home/user/Documents
  echo "ディレクトリを削除しました"
fi
```

もし、 `Documents` ディレクトリが存在しない場合、 `rm -r /home/user/Documents` が実行され、 `rm` コマンドは `/home/user/Documents` ファイルを削除しようとします。しかし、 `Documents` ファイルは存在しないため、エラーが発生する可能性があります。このように、制御構造の中でディレクトリの存在をチェックする際には、意図した動作が行われるように注意する必要があります。

## 関連リンク

[Linuxコマンド： `test` コマンドのマニュアル（日本語）](https://jv.wikipedia.org/wiki/Test_(Unix))

[Bashスクリプト