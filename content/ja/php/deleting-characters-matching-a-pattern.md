---
title:    "PHP: パターンにマッチする文字を削除する"
keywords: ["PHP"]
---

{{< edit_this_page >}}

## なぜ

「 パターンにマッチする文字を削除する方が良い理由は何ですか？」と聞かれたとき、多くの人は「私たちのプログラムがより効率的に動作するからです。」と答えるかもしれません。削除する前に文字列に条件を適用することで、余分な処理を避けることができます。

## 方法

PHPの`preg_replace()`関数を使うことで、文字列から特定のパターンにマッチする文字を削除することができます。以下のようにコード例を示します。
```PHP
// パターンと一致する文字を削除する
$string = "Hello, my name is [John].";
$pattern = "/\[.*?\]/"; // 「[」と「]」の間の文字を一致させるパターン
$replacement = ""; // マッチした文字を空文字に置き換える

$result = preg_replace($pattern, $replacement, $string);

// 結果を出力する
echo $result; // 出力結果：Hello, my name is .
```

`preg_replace()`関数では、正規表現を使ったパターンマッチングが可能です。上の例では、`/[.*?\]/`のように元の文字列から削除したいパターンを指定し、第二引数に削除後の置き換え文字列を指定しています。また、`preg_replace()`関数は第三引数に文字列だけでなく、配列やコールバック関数を指定することもできます。

## ディープダイブ

`preg_replace()`関数はパターンマッチングによる文字列の置き換えだけでなく、パターンにマッチした文字を削除することもできます。上の例では、`/[.*?]/`というパターンを使用しましたが、これは「`[`」と「`]`」の間の任意の文字列に一致するものです。`.*?`部分は`?`を付けることで、最短の文字列にマッチするように設定しています。つまり、最初の`[`と`][]`の間に一致する文字列を削除するということになります。

また、文字列を置き換えるだけでなく、指定したパターンに一致した部分を保持することもできます。これには`preg_match()`関数を使用します。詳細な使い方やパターンマッチングの文法については、PHP公式ドキュメントを参照してください。

## 参考リンク

- [PHP公式ドキュメント: preg_replace()関数](https://www.php.net/manual/ja/function.preg-replace.php)
- [PHP正規表現チュートリアル](https://php.net/manual/ja/regexp.tutorial.php)
- [CodeIgniterでpreg_replace()関数を使用する方法](https://www.ezbbs.net/cgi/reply/10296/)