---
title:    "C: 文字列の長さを求める"
keywords: ["C"]
editURL:  "https://github.com/dogweather/forkful/blob/master/content/ja/c/finding-the-length-of-a-string.md"
---

{{< edit_this_page >}}

##なぜ？

文字列の長さを求めることについて、なぜ誰かがこれに従事するのでしょうか？実際には、文字列の長さを取得することは、プログラミングで非常に一般的な操作です。文字列を分析し、特定の操作を実行するためには、まずその長さを知る必要があるからです。

## 方法

文字列の長さを取得する一番簡単な方法は、文字列の配列の最後の要素のインデックス番号を調べることです。これは、C言語ではヌル文字('\0')が使用されるためです。以下のコードを見てみましょう。

```C
#include <stdio.h>

int main()
{
    char str[10] = "こんにちは"; // 9文字(英数字1文字=2バイト、日本語1文字=3バイト)
    int length = 0;
    while (str[length] != '\0') // 最後の要素が'\0'になるまでループ
        length++;
    printf(""%s"の長さは%dです。", str, length);
    return 0;
}
```

上記のコードを実行すると、次のような出力が得られます。

```
"こんにちは"の長さは5です。
```

ここでは、配列の要素でループを回し、最後の要素がヌル文字になるまで長さをカウントしています。この方法はとてもシンプルで、わかりやすいですが、文字列の長さがわかっている場合に限られています。

もう1つの方法は、C言語の標準ライブラリに用意されているstrlen関数を使用することです。この関数は、与えられた文字列の長さを返すため、ループを回して長さをカウントする必要はありません。以下のように使用します。

```C
#include <stdio.h>
#include <string.h>

int main()
{
    char str[10] = "こんにちは";
    int length = strlen(str);
    printf(""%s"の長さは%dです。", str, length);
    return 0;
}
```

出力は先ほどと同じになります。

```
"こんにちは"の長さは5です。
```

len関数よりも正確な結果を得ることができますが、strlen関数自体がループを回しているため、処理が少し多くなっている点に注意が必要です。

##ディープダイブ

文字列の長さを求めるという単純な操作ですが、実際にはC言語で実装されている文字列の仕組みには多くのことがあります。例えば、文字列を認識するためにヌル文字が必要な理由や、マルチバイト文字の扱い方などがあります。

また、C言語では文字列と配列が密接に結びついているため、文字列の長さを求める際には文字列がどのようにメモリ上に格納されるのかを理解しておくことも重要です。ディープダイブをすることで、より良いコードを書くことができるようになるでしょう。

##参考リンク

- [文字列の長さを求める方法 (C言語)](https://programming-place.net/ppp/contents/c/strlen.html)
- [C言語の文字列処理とその周辺について学ぶ](https://mizukusa.hatenablog.com/entry