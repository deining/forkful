---
title:    "C: 正規表現の使用"
keywords: ["C"]
---

{{< edit_this_page >}}

## Why (なぜ)

正規表現を使用する理由は、単純なパターンマッチングだけではなく、文字列の検索や置換を行うためです。この強力なツールは、コードの書き方を大幅に簡素化し、効率的に文字列を処理することができます。

## How To (やり方)

正規表現を使用するには、最初に `<regex.h>` ヘッダーファイルをインクルードする必要があります。次に、`regex_t` 構造体を使用してパターンをコンパイルし、その後 `regexec()` 関数を使用して文字列内でのマッチングを行います。

以下は、 `Hello` という文字列が含まれるかどうかをチェックする例です。

```c
#include <stdio.h>
#include <regex.h>
 
int main()
{
    regex_t regex;
    int ret;
    char str[] = "Hello World!";
 
    ret = regcomp(&regex, "Hello", 0);
 
    if (ret) {
        printf("パターンをコンパイルできませんでした。\n");
        exit(1);
    }
 
    ret = regexec(&regex, str, 0, NULL, 0);
    if (!ret) {
        printf("文字列内にマッチが見つかりました。\n");
    }
    else if (ret == REG_NOMATCH) {
        printf("文字列内にマッチが見つかりませんでした。\n");
    }
    else {
        printf("マッチエラーです。エラーコード：%d\n", ret);
        exit(1);
    }
 
    regfree(&regex);
 
    return 0;
}
```

上記のコードを実行すると、 `"文字列内にマッチが見つかりました。"` という出力が得られます。

## Deep Dive (詳しく見る)

正規表現を学ぶには、基本的なパターンや特殊な文字、そして量指定子を理解することが重要です。特殊文字としては、`*` や `+`、`?` などがあり、量指定子としては `{n}` や `{n, m}` などがあります。これらを組み合わせることで、より複雑なパターンを表現することができます。

また、正規表現を使用する際は、エスケープシーケンスに注意する必要があります。例えば、`.` は任意の1文字を表すために使用されますが、文字そのものを表したい場合は `\.` とエスケープする必要があります。

さらに、正規表現を使用する際は、デリミタとして `/` を使用することが多いですが、他の文字を使用することも可能です。ただし、デリミタとして使用する文字は正規表現のパターン内には含まれていないことが重要です。

## See Also (参考リンク)

- [正規表現の基本](https://the-winter.github.io/regex/)
- [正規表現チュートリアル](https://regexone.com/)
- [正規表現クイックリファレンス](https://www3.ntu.edu.sg/home/ehchua/programming/howto/Regexe.html)