---
title:                "Arduino: テキストファイルの読み込み"
simple_title:         "テキストファイルの読み込み"
programming_language: "Arduino"
category:             "Arduino"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ja/arduino/reading-a-text-file.md"
---

{{< edit_this_page >}}

## なぜ読み込みを行うのか

テキストファイルを読み込むことは、Arduinoプログラミングの重要な部分です。例えば、データベースやネットワークからデータを読み込み、それを処理することができます。また、読み込んだデータを利用して、センサーの値の変更やLEDの点灯など、様々なアクションを起こすこともできます。この記事では、テキストファイルを読み込む方法を紹介します。

## 使い方

まずは、読み込みたいテキストファイルをArduinoのメモリに保存する必要があります。これは、SDカードやUSBドライブなどの外部ストレージから読み込むこともできますが、ここではArduinoのメモリ内にあるファイルを読み込む方法を説明します。まず、Arduinoのファイルシステムライブラリをインクルードします。

```Arduino
#include <SPI.h>
#include <SD.h>
```

次に、ファイルを開くための変数を作成します。ここでは`file`という名前で宣言します。

```Arduino
File file;
```

そして、`file`変数に読み込むファイルの名前を指定して`open()`メソッドを使用します。ここでは`data.txt`という名前のファイルを開きます。

```Arduino
file = SD.open("data.txt");
```

ファイルが正しく開けたかどうかを確認するために、`file`変数の`available()`メソッドを使用します。これは、ファイル内のデータのサイズを返します。もしファイルが正しく開けていれば、値は0より大きくなります。

```Arduino
if(file.available()){
  // ファイルを読み込む処理
}
```

それでは、テキストファイルを実際に読み込んでみましょう。`read()`メソッドを使用することで、ファイル内の文字を1文字ずつ読み込むことができます。例えば、ファイル内に`Hello, World!`という文字列があった場合、それを読み込んでシリアルモニタに表示するコードは以下のようになります。

```Arduino
char c;

while(file.available()){
  c = file.read(); // ファイル内の1文字を読み込む
  Serial.print(c); // シリアルモニタに表示する
}

```

このコードを実行すると、シリアルモニタに`Hello, World!`という文字列が表示されるはずです。

## 詳細を掘り下げる

テキストファイルを読み込む際、上記の例では1文字ずつ読み込む方法を紹介しましたが、実際には文字列を読み込んで処理する場合が多いでしょう。その場合、`read()`メソッドに文字列を受け取るためのバッファを指定することで、複数の文字をまとめて読み込むことができます。

```Arduino
char buffer[255]; // 255個の文字まで受け取るバッファを宣言

while(file.available()){
  file.read(buffer, 255); // 255文字まで読み込む
}
```

また、読み込ん