---
title:    "C recipe: Creating a temporary file"
keywords: ["C"]
---

{{< edit_this_page >}}

## Why

Temporary files are an important part of programming, especially in C. They serve as a way to store data temporarily during program execution. This can be useful for a variety of reasons, such as storing intermediate results, creating a backup file, or passing data between processes.

## How To

Creating a temporary file in C is fairly straightforward. The `tmpfile()` function is used to create a temporary file and return a `FILE` pointer to it. Here is an example code snippet:

```C
// Include necessary header file
#include <stdio.h>

int main() {

	// Create temporary file
	FILE *temp = tmpfile();

	// Check for successful creation
	if (temp == NULL) {
		printf("Error creating temporary file\n");
		return 1;
	}

	// Write data to temporary file
	fprintf(temp, "This is a temporary file created in C!");

	// Close temporary file
	fclose(temp);

	// Print success message
	printf("Temporary file created successfully\n");

	return 0;
}
```

The `tmpfile()` function creates a temporary file in the default temporary directory. It returns a `FILE` pointer, which can be used to perform operations on the temporary file, such as writing data to it.

When run, the above code will output the following:

```
Temporary file created successfully
```

## Deep Dive

Under the hood, the `tmpfile()` function creates a temporary file using the `mkstemp()` function. This function creates a unique file name and opens the file in read/write mode. The file is automatically deleted when it is closed.

Another way to create a temporary file is by using the `tmpnam()` function. This function creates a unique file name and returns it as a string. However, this method is considered less secure as the same file name can be generated by another process before the file is created.

It is important to note that temporary files are usually created in the default temporary directory of the operating system. This directory can vary depending on the system and can be changed by the user. Therefore, it is a good practice to check for errors when creating temporary files and handle them accordingly.

## See Also

- [tmpfile() documentation](https://www.gnu.org/software/libc/manual/html_node/Temporary-Files.html)
- [mkstemp() documentation](https://www.gnu.org/software/libc/manual/html_node/Creating-Temporary-Files.html)
- [tmpnam() documentation](https://www.gnu.org/software/libc/manual/html_node/Temporary-File-Names.html)