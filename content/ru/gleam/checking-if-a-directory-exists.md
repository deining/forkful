---
title:                "Проверка существования директории"
date:                  2024-01-28T23:55:53.491751-07:00
model:                 gpt-4-0125-preview
simple_title:         "Проверка существования директории"
programming_language: "Gleam"
category:             "Gleam"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/ru/gleam/checking-if-a-directory-exists.md"
changelog:
  - 2024-01-28, gpt-4-0125-preview, translated from English
---

{{< edit_this_page >}}

## Что и Почему?

Проверка существования директории похожа на заглядывание в комнату, чтобы увидеть, есть она там или нет, перед тем как войти. Программисты делают это, чтобы избежать ошибок при попытке доступа или изменения директорий, которых может не быть.

## Как это сделать:

Чтобы проверить существование директории в Gleam, нам нужно взаимодействовать с файловой системой. К сожалению, на момент моих последних данных в 2023 году, в Gleam нет встроенных операций с файловой системой, поскольку он в первую очередь предназначен для создания отказоустойчивых систем. Тем не менее, мы можем взаимодействовать с операциями файловой системы Erlang благодаря возможности Gleam использовать функции Erlang.

Вот простой пример с использованием модуля `file` Erlang:

```Gleam
import gleam/erlang
import gleam/io

fn does_directory_exist(dir: String) -> Bool {
  case erlang.apply(
    module: "file", 
    function: "read_file_info", 
    args: [dir]
  ) {
    Ok(_) -> true
    Error(_) -> false
  }
}

fn main() {
  let directory = "/some/path/to/directory"
  let exists = does_directory_exist(directory)
  io.println(exists)
}
```

Этот код может вывести `true`, если директория существует, и `false`, если её нет.

## Подробнее

Исторически Gleam молод и развивается. Он построен на виртуальной машине BEAM, которую использует Erlang, и, таким образом, наследует надёжные функции Erlang, включая операции с файловой системой. Без родной поддержки этих операций мы должны обратиться к взаимодействию с Erlang.

Альтернативы проверки существования директории зависят от используемой системы. В других языках программирования могут быть прямые вызовы или стандартные библиотеки, доступные для этих задач. Например, в Python вы бы использовали `os.path.isdir()`.

Детали реализации с функцией `file.read_file_info` в Erlang говорят нам о том, что она возвращает кортеж, который включает информацию о файле, если операция прошла успешно, или кортеж ошибки, если она не удалась. Эти кортежи могут быть затем использованы для сопоставления с образцом и определения результата. Кортеж успеха выглядит как `{:ok, FileInfo}`, а ошибка представлена как `{:error, Reason}`.

Хотя на данный момент использование библиотек Erlang в Gleam является путём вперёд для задач подобного рода, стоит отметить, что сообщество может в будущем ввести специализированный пакет для взаимодействия с файловой системой.

## Смотрите также

- [Документация модуля 'file' Erlang](http://erlang.org/doc/man/file.html)
- [Причины ошибок Erlang для операций с файлами](http://erlang.org/doc/apps/stdlib/io_protocol.html)
