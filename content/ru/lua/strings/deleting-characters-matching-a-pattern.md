---
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:58:05.296449-07:00
description: "\u041A\u0430\u043A \u0441\u0434\u0435\u043B\u0430\u0442\u044C: \u0412\
  \ Lua \u043C\u044B \u043C\u043E\u0436\u0435\u043C \u0438\u0441\u043F\u043E\u043B\
  \u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0444\u0443\u043D\u043A\u0446\u0438\u044E\
  \ `gsub` \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u043D\u044B \u0432\u0445\u043E\
  \u0436\u0434\u0435\u043D\u0438\u0439 \u0448\u0430\u0431\u043B\u043E\u043D\u0430\
  \ \u0434\u0440\u0443\u0433\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u043E\u0439\
  \ \u2013 \u043F\u0443\u0441\u0442\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u043E\
  \u0439, \u043A\u043E\u0433\u0434\u0430 \u043C\u044B \u0445\u043E\u0442\u0438\u043C\
  \ \u0438\u0445 \u0443\u0434\u0430\u043B\u0438\u0442\u044C."
lastmod: '2024-03-13T22:44:45.258577-06:00'
model: gpt-4-0125-preview
summary: "\u0412 Lua \u043C\u044B \u043C\u043E\u0436\u0435\u043C \u0438\u0441\u043F\
  \u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0444\u0443\u043D\u043A\u0446\
  \u0438\u044E `gsub` \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u043D\u044B \u0432\
  \u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0439 \u0448\u0430\u0431\u043B\u043E\u043D\
  \u0430 \u0434\u0440\u0443\u0433\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u043E\
  \u0439 \u2013 \u043F\u0443\u0441\u0442\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\
  \u043E\u0439, \u043A\u043E\u0433\u0434\u0430 \u043C\u044B \u0445\u043E\u0442\u0438\
  \u043C \u0438\u0445 \u0443\u0434\u0430\u043B\u0438\u0442\u044C."
title: "\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0441\u0438\u043C\u0432\u043E\
  \u043B\u043E\u0432, \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\
  \u0443\u044E\u0449\u0438\u0445 \u0448\u0430\u0431\u043B\u043E\u043D\u0443"
weight: 5
---

## Как сделать:
В Lua мы можем использовать функцию `gsub` для замены вхождений шаблона другой строкой – пустой строкой, когда мы хотим их удалить:

```lua
local text = "Hello, 123 World! 456"
local pattern = "%d" -- шаблон, который соответствует всем цифрам
local cleanedText, numOfReplacements = text:gsub(pattern, "")

print(cleanedText) -- Вывод: "Hello,  World!"
print("Количество произведенных замен:", numOfReplacements) -- Вывод: "Количество произведенных замен: 6"
```

Обратите внимание, что `gsub` также возвращает количество произведенных замен, которое может быть полезной информацией.

## Глубокое погружение
Шаблоны Lua проще, чем регулярные выражения, найденные в других языках, но тем не менее мощны. Исторически, решение Lua реализовать более легкий механизм поиска по шаблонам основано на желании сохранить язык одновременно легковесным и быстрым.

Альтернативы включают использование циклов с `string.find` и `string.sub` для ручного осмотра и манипуляции строками, но это обычно менее эффективно, чем сопоставление с шаблоном с помощью `gsub`.

С точки зрения реализации, когда вызывается `gsub` с шаблоном, Lua внутренне компилирует этот шаблон в байт-код, который затем выполняется сопоставителем шаблонов. Стоит отметить, что есть различие между шаблонами Lua и настоящими регулярными выражениями, при этом первые имеют меньший набор функций, который исключает конструкции, такие как просмотр вперед или обратные ссылки.

## Смотрите также
- Руководство по Lua 5.4 для `string.gsub`: https://www.lua.org/manual/5.4/manual.html#pdf-string.gsub
- Программирование на Lua (первое издание) доступно онлайн для понимания шаблонов: https://www.lua.org/pil/20.2.html
- Онлайн-тестер шаблонов Lua для экспериментов с сопоставлением шаблонов Lua: https://www.lua.org/cgi-bin/demo

Помните, эти инструменты помогут закрепить ваше понимание сопоставления шаблонов Lua и предоставят вам песочницу для тестирования ваших строковых манипуляций. Счастливого кодирования!
