---
changelog:
- 2024-01-29, gpt-4-0125-preview, translated from English
date: 2024-01-29 00:01:54.226369-07:00
description: "\u041A\u0430\u043A \u044D\u0442\u043E \u0441\u0434\u0435\u043B\u0430\
  \u0442\u044C: \u0412\u043E\u0442 \u043A\u0430\u043A \u0438\u0437\u0431\u0430\u0432\
  \u0438\u0442\u044C\u0441\u044F \u043E\u0442 \u043A\u0430\u0432\u044B\u0447\u0435\
  \u043A \u0432 Lua."
lastmod: '2024-03-13T22:44:45.266128-06:00'
model: gpt-4-0125-preview
summary: "\u0412\u043E\u0442 \u043A\u0430\u043A \u0438\u0437\u0431\u0430\u0432\u0438\
  \u0442\u044C\u0441\u044F \u043E\u0442 \u043A\u0430\u0432\u044B\u0447\u0435\u043A\
  \ \u0432 Lua."
title: "\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043A\u0430\u0432\u044B\u0447\
  \u0435\u043A \u0438\u0437 \u0441\u0442\u0440\u043E\u043A\u0438"
weight: 9
---

## Как это сделать:
Вот как избавиться от кавычек в Lua:

```lua
local function remove_quotes(str)
  return (str:gsub("^%p(.*)%p$", "%1"))
end

print(remove_quotes('"Привет, мир!"'))     -- Привет, мир!
print(remove_quotes("'До свидания, кавычки!'"))  -- До свидания, кавычки!
```

Вуаля! Кавычки исчезли, как носки в стиральной машине.

## Подробнее
Люди удаляли кавычки из строк с тех пор, как языки программирования научились обрабатывать текст, что, в общем-то, уже очень давно. В Lua функция `gsub` выполняет всю тяжёлую работу, используя шаблоны как скальпель, чтобы вырезать кавычки. Альтернативы? Конечно, вы могли бы использовать regex в языках, которые его поддерживают, или написать свой собственный цикл, который будет перебирать каждый символ (ой, но это ваше время).

Сопоставление шаблонов в Lua дает вам ощущение regex-lite без необходимости импортировать целую библиотеку. Угловая скобка (`^`) и знак доллара (`$`) соответствуют началу и концу строки соответственно; `%p` соответствует любому знаку пунктуации. После того как мы избавимся от ведущей и завершающей пунктуации, мы захватываем все остальное с помощью `(.*),` и заменяем весь совпадающий текст этой захваченной группой, используя `" %1"`.

Не забывайте, что сопоставление шаблонов в Lua не так мощно, как полноценные движки regex - например, оно не может считать или отслеживать. Эта простота является одновременно и благом, и проклятьем, в зависимости от того, какие кавычки вы пытаетесь обработать и где они скрываются.

## См. также
Погрузитесь глубже в сопоставление шаблонов Lua с книгой PiL (Programming in Lua): http://www.lua.org/pil/20.2.html

Для непревзойденной элегантности проверьте, как это делают в других языках для сравнения, начиная с `str.strip` в Python: https://docs.python.org/3/library/stdtypes.html#str.strip
