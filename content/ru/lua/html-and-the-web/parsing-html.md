---
changelog:
- 2024-01-28, gpt-4-0125-preview, translated from English
date: 2024-01-28 23:59:46.224170-07:00
description: "\u041A\u0430\u043A: Lua \u0438\u0437\u043D\u0430\u0447\u0430\u043B\u044C\
  \u043D\u043E \u043D\u0435 \u0442\u0430\u043A \u0445\u043E\u0440\u043E\u0448\u043E\
  \ \u043F\u043E\u0434\u0445\u043E\u0434\u0438\u0442 \u0434\u043B\u044F \u0440\u0430\
  \u0431\u043E\u0442\u044B \u0441 \u0432\u0435\u0431\u043E\u043C, \u043A\u0430\u043A\
  \ Python \u0438\u043B\u0438 JavaScript, \u043D\u043E \u0441 \u0431\u0438\u0431\u043B\
  \u0438\u043E\u0442\u0435\u043A\u0430\u043C\u0438 `luasocket` \u0438 `luahtml` \u043E\
  \u043D\u0430 \u043C\u043E\u0436\u0435\u0442 \u0441\u043C\u0435\u043B\u043E\u2026"
lastmod: '2024-03-13T22:44:45.284255-06:00'
model: gpt-4-0125-preview
summary: "Lua \u0438\u0437\u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E \u043D\u0435\
  \ \u0442\u0430\u043A \u0445\u043E\u0440\u043E\u0448\u043E \u043F\u043E\u0434\u0445\
  \u043E\u0434\u0438\u0442 \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B\
  \ \u0441 \u0432\u0435\u0431\u043E\u043C, \u043A\u0430\u043A Python \u0438\u043B\u0438\
  \ JavaScript, \u043D\u043E \u0441 \u0431\u0438\u0431\u043B\u0438\u043E\u0442\u0435\
  \u043A\u0430\u043C\u0438 `luasocket` \u0438 `luahtml` \u043E\u043D\u0430 \u043C\u043E\
  \u0436\u0435\u0442 \u0441\u043C\u0435\u043B\u043E \u0448\u0430\u0433\u043D\u0443\
  \u0442\u044C \u0432 \u043E\u0431\u043B\u0430\u0441\u0442\u044C \u0440\u0430\u0437\
  \u0431\u043E\u0440\u0430 HTML."
title: "\u0420\u0430\u0437\u0431\u043E\u0440 HTML"
weight: 43
---

## Как:
Lua изначально не так хорошо подходит для работы с вебом, как Python или JavaScript, но с библиотеками `luasocket` и `luahtml` она может смело шагнуть в область разбора HTML. Давайте начнем с базового примера:

```Lua
local socket = require("socket.http")
local html = require("luahtml")

-- Получение HTML с URL
local body, code = socket.request("http://example.com")

if code ~= 200 then
    print("Не удалось загрузить страницу")
    return
end

-- Разбор HTML
local parsed_html = html.parse(body)

-- Извлечение данных из конкретного элемента, скажем, абзаца
for _, p in ipairs(parsed_html:select("p")) do
    print(p:getcontent())
end
```

Это выведет содержимое всех тегов абзаца (`<p>`) с полученной веб-страницы.

## Глубокое погружение
Разбор HTML в Lua - это не ситуация "один инструмент для всего". Вам придется сочетать различные библиотеки, в отличие от языков, созданных с учетом разбора веба. Исторически Lua была помощником для быстрой встроенной скриптовой разработки в приложениях, а не для веб-скрапинга.

Альтернативы? Помимо `luahtml`, существуют также `luascrape` и `luaxpath` для различных потребностей в разборе. Нет объективно "лучшего" выбора - каждый имеет свои особенности, с которыми вам придется разбираться.

Погружаясь в реализацию, библиотеки Lua, как правило, используют C API для повышения производительности. Производя разбор HTML, вы будете манипулировать узлами и элементами, каждый из которых - это возможность погнаться за каверзными деталями веб-структур.

## Смотрите также
- Документация LuaSocket: http://w3.impa.br/~diego/software/luasocket/http.html
- luahtml на GitHub для глубокого погружения в методы разбора: https://github.com/o-lim/luahtml
- Вики-сообщество пользователей Lua для жемчужин сообщества и устранения неполадок: http://lua-users.org/wiki/
