---
title:                "Назва статті: Перевірка наявності каталогу."
html_title:           "C: Назва статті: Перевірка наявності каталогу."
simple_title:         "Назва статті: Перевірка наявності каталогу."
programming_language: "C"
category:             "C"
tag:                  "Files and I/O"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/c/checking-if-a-directory-exists.md"
---

{{< edit_this_page >}}

## Чому

Перевірка існування директорії - важлива задача для безпечного та ефективного виконання програмного коду. Це дозволяє перевірити наявність певної директорії перед виконанням дій з файлами або забезпечити, що директорія існує перед спробою звернення до неї.

## Як це зробити

```c
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>

int main() {
  // Задаємо шлях до директорії, яку потрібно перевірити
  char *path = "/home/user/mydirectory";
  // Створюємо структуру для збереження інформації про директорію
  struct stat dir_info;
  // Виклик функції stat для отримання даних про директорію
  if (stat(path, &dir_info) == 0) {
    // Перевіряємо, чи директорія існує за допомогою макросу S_ISDIR
    if (S_ISDIR(dir_info.st_mode))
      printf("Директорія існує!");
    else
      printf("Директорія не існує.");
  } else {
    printf("Сталась помилка.");
    exit(EXIT_FAILURE);
  }

  return 0;
}
```

Приклад виводу програми при наявності директорії:

```c
Директорія існує!
```

Приклад виводу програми при відсутності директорії:

```c
Директорія не існує.
```

## Детальний розгляд

Функція `stat` використовується для отримання інформації про файл або директорію за допомогою шляху до нього. Вона повертає нуль при успішному виконанні та заповнює структуру `struct stat` з даними про файл або директорію. Для перевірки існування директорії ми використовуємо макрос `S_ISDIR`, який перевіряє поле `st_mode` в структурі `dir_info`, що зберігає тип файлу. Якщо це поле має значення `S_IFDIR`, то це означає, що це директорія.

## Дивіться також

- [Стаття про функцію `stat` на сайті JustLinux](http://www.justlinux.com/articles/Stat.pdf)
- [Документація на функцію `stat` в мові програмування C](https://www.gnu.org/software/libc/manual/html_node/Accessing-File-Attributes.html#Accessing-File-Attributes)