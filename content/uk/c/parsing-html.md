---
title:                "Витягання html"
html_title:           "C: Витягання html"
simple_title:         "Витягання html"
programming_language: "C"
category:             "C"
tag:                  "HTML and the Web"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/uk/c/parsing-html.md"
---

{{< edit_this_page >}}

## Зачем
Цілком розумно питання - чому узагалі приступати до парсингу HTML? На це можна відповісти двома головними причинами. По-перше, HTML є основною мовою розмітки для веб-сторінок, тому обробка інформації з них є необхідною для багатьох веб-розробників. По-друге, парсинг HTML дозволяє здійснити аналіз структури інформації на веб-сторінці, що дозволяє здійснювати різні маніпуляції з цими даними.

## Як
Для початку розглянемо приклад парсингу HTML з використанням мови C. Щоб отримати початковий код веб-сторінки, достатньо використати функцію `curl` з бібліотеки `libcurl`. Також потрібно підключити бібліотеку `libxml`, яка дозволяє парсити HTML-документи і отримати з них структуровані дані. Далі виконуємо запит на сторінку та отримуємо весь HTML-код у змінну `html`.

```c
#include <curl/curl.h>
#include <libxml/HTMLparser.h>

// робимо запит на веб-сторінку
CURL *curl = curl_easy_init();
curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");
CURLcode res = curl_easy_perform(curl);
if (res != CURLE_OK) {
    fprintf(stderr, "curl failed: %s\n",
        curl_easy_strerror(res));
}

// отримуємо повний HTML-код веб-сторінки
char *html = curl_easy_getinfo(html);

// парсимо HTML та отримуємо структуровані дані
htmlDocPtr doc = htmlReadMemory(html, strlen(html),
    "https://example.com", NULL, HTML_PARSE_NOWARNING |
    HTML_PARSE_NOERROR);
```

Далі можна звертатися до структурованих даних за допомогою функцій бібліотеки `libxml`, наприклад, отримувати список елементів за тегом, зчитувати атрибути чи тексти. Робота з цими даними залежить від конкретної задачі парсингу.

## Deep Dive
Варто зазначити, що в процесі парсингу HTML можна стикнутися з деякими проблемами, наприклад, з нестандартною розміткою або вкладеними тегами. Тому важливо бути готовим до обробки різноманітних випадків та використовувати інструменти, такі як регулярні вирази, для знаходження та обробки потрібних даних. Також варто пам'ятати про ефективність парсингу, оскільки великі масиви даних можуть значно уповільнити роботу програми.

## Дивіться також
- [Curl](https://curl.se/)
- [Lib