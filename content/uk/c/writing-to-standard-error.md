---
title:    "C: Писання в стандартну помилку"
keywords: ["C"]
---

{{< edit_this_page >}}

## Чому

В програмуванні іноді можуть виникати помилки або проблеми, які потрібно відлагоджувати. Писати дані про ці помилки в стандартному потоці виведення не є надійним рішенням, оскільки ці дані можуть бути загублені серед великої кількості інших виведених повідомлень. Тому корисно вміти виводити дані про помилки в стандартний потік помилок (stderr), який буде виводити тільки повідомлення про помилки, що дозволить легше відлагоджувати код.

## Як

Для того, щоб виводити дані в стандартний потік помилок, необхідно скористатися функцією `fprintf()` з бібліотеки `<stdio.h>`. Ця функція приймає два аргументи: файл, в який необхідно вивести дані (у нашому випадку це буде `stderr`) і форматовану стрічку з даними, які необхідно вивести. Наприклад, `fprintf(stderr, "Помилка: %s", "змінна a не існує")` виведе повідомлення про помилку зі значенням змінної "a". Для зручності можна також використовувати макрос `perror()` з тієї ж бібліотеки, який автоматично виведе текст повідомлення про помилку на основі значення змінної `errno`.

```C
#include <stdio.h>
#include <errno.h>

int main() {
    float a;
    if (scanf("%f", &a) != 1) {
        // варіант 1
        fprintf(stderr, "Помилка зчитування з консолі: %d", errno);

        // варіант 2
        perror("Помилка зчитування з консолі");
    }
    return 0;
}
```

Варіант 1 виведе повідомлення про код помилки (errno), а варіант 2 - текстове повідомлення, яке вбудує код помилки за допомогою функції `strerror()`.

## Глибоке занурення

Для того, щоб бути більш гнучким при виведенні повідомлень про помилки, можна використовувати не тільки стандартний потік помилок, але й створювати власні файли для виведення даних. Також існують функції `fputs()` та `fputc()` для прямого запису символів в файл, який можна використовувати для створення власного форматування повідомлень про помилки. Детальніше про ці функції можна дізнатися в документації.

## Дивіться також

- [The Standard Error Stream in C](https://www.geeksforgeeks.org/the-standard-error-stream-in-c/)
- [Understanding stderr, stdout, and stdin in C](https://www.programiz.com/c-programming/c-file-input-output)
- [C Programming/Basics of File I/O](