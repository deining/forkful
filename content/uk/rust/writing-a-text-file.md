---
title:    "Rust: Написання текстового файлу"
keywords: ["Rust"]
editURL:  "https://github.com/dogweather/forkful/blob/master/content/uk/rust/writing-a-text-file.md"
---

{{< edit_this_page >}}

## Чому

Написання текстового файлу є невід`ємною частиною будь-якого програміста, оскільки це дозволяє зберігати і редагувати дані для подальшого використання. У цій статті ми поглянемо на те, як можна надійно створити текстовий файл у мові програмування Rust.

## Як це зробити

Для початку, створіть новий проект Rust, використовуючи команду `cargo new text_file`. Далі, відкрийте файл `main.rs` у вашому улюбленому текстовому редакторі. Для написання текстового файлу, нам знадобиться дві бібліотеки - `std::fs` та `std::io`.

```
use std::fs::File;
use std::io::Write;
```

Після цього, ми можемо створити новий файл, використовуючи метод `File::create()` та передаючи назву файлу як параметр.

```
let mut file = File::create("my_file.txt")
    .expect("Неможливо створити файл!");
```

Далі, ми можемо написати у файл, використовуючи метод `Write::write_all()`. У прикладі нижче, ми будемо записувати рядок "Це мій перший текстовий файл!" у наш файл.

```
file.write_all("Це мій перший текстовий файл!")
    .expect("Неможливо записати у файл!");
```

Варто зауважити, що метод `write_all()` приймає байтовий масив (байтовий рядок у випадку Rust), тому потрібно перетворити наш рядок у байтовий масив за допомогою методу `as_bytes()`.

І щоб завершити, не забудьте закрити файл, використовуючи метод `File::close()`.

```
file.close()
    .expect("Неможливо закрити файл!");
```

## Глибоке занурення

Написання текстових файлів може бути більш складною задачею, якщо потрібно зберігати більш складну структуру даних (наприклад, масиви або структури). У цьому випадку, можна використовувати серіалізацію та десеріалізацію, щоб зберегти структуру даних у вигляді текстового файлу.

Налаштуйте ваш проект залежностями `serde` та `serde_json`, щоб використовувати їх функціональність. Потім можете серіалізувати вашу структуру даних у JSON за допомогою методу `serde_json::to_string()` та записати його у файл так само, як і звичайний рядок.

```
use serde::{Serialize, Deserialize};
use serde_json;
```

```
#[derive(Serialize, Deserialize)]
struct Person {
    name: String,
    age: u8,
    hobbies: Vec<String>,
}

let person = Person {
    name: String::from("John"),
    age: 25,
    hobbies: vec![String::from("Плавання"), String::from("Читання")],
};

file.write_all(serde_json::to_string(&person