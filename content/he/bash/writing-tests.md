---
title:    "Bash: כתיבת בדיקות"
keywords: ["Bash"]
---

{{< edit_this_page >}}

## למה

כתיבת בדיקות היא חלק חשוב וכמעט בלתי נפרד מפיתוח בש. ללא בדיקות, אין דרך בטוחה לוודא שהקוד שכתבנו עובד כצפוי ואין לנו דרך לזהות באופן אוטומטי בעיות בקוד.

## כיצד לעשות כך

#### צורת הפעולה הבסיסית:
לכתוב תחילה פונקצית בדיקה שבה נכלול כמה בדיקות תקינות, להפעיל פקודת echo עבור כל בדיקה ולבדוק שהתוצאה היא אמת על ידי ערך החזרה של הפקודה.

```bash
# קובץ example_test.sh
#!/bin/bash
# מציג את כל המשתמשים המחוברים כרגע
who | grep $USER
# בדיקה שהמשתמש שמחובר הוא באמת המשתמש הנוכחי
echo "משתמש נוכחי:"
echo $USER
```

לאחר מכן, נוכל להריץ את הפקודה `bash example_test.sh` ולראות את הפלט שלה, ולבדוק שהמשתמש הוא באמת המשתמש הנוכחי.

#### שימוש בספריית bash-test:
כדי לקצר ולפשט את כתיבת הבדיקות, נוכל להשתמש בספרייה bash-test שנועדה לקלט את הבדיקות ולהריץ אותן באופן אוטומטי.

```bash
# קוד source.sh
#!/usr/bin/env bash
source ../../vendor/xet7/bashtest/main/entry.sh
use bashtest
# מציג את כל המשתמשים המחוברים כרגע
who | grep $USER
# בדיקה שהמשתמש שמחובר הוא באמת המשתמש הנוכחי
has "$USER" $(who | grep $USER)
# מציג הודעה אם כל הבדיקות עוברות בהצלחה, או הודעת שגיאה אחרת
assert_end sample
```

ולאחר מכן נוכל להריץ את הפקודה `bash -c "source source.sh && assert_my sample"` כדי לראות את הפלט שלה, ולוודא שכל הבדיקות נעברו בהצלחה.

## מעמקים

כתיבת בדיקות כבר מאז שנוצר לשפת bash. כיום, ישנן ספ