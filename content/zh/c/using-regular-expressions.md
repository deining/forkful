---
title:                "C: 使用正则表达式"
simple_title:         "使用正则表达式"
programming_language: "C"
category:             "C"
tag:                  "Strings"
editURL:              "https://github.com/dogweather/forkful/blob/master/content/zh/c/using-regular-expressions.md"
---

{{< edit_this_page >}}

## 为什么使用正则表达式

正则表达式是一种强大的工具，它可以帮助程序员轻松处理文本数据。如果你需要从文本中提取特定的信息，替换文本中的一些内容，或者验证用户输入的格式是否正确，那么正则表达式是必不可少的工具。使用正则表达式可以减少代码量，提高程序的可读性和稳定性。

## 如何使用正则表达式

使用正则表达式的第一步是导入"regex.h"头文件。接下来，我们可以使用函数regex_match()从文本中匹配出我们需要的内容。让我们来看一个简单的例子，从一组手机号码中筛选出中国大陆的手机号码。

```C
#include <stdio.h>
#include <regex.h>

int main()
{
    char *phone_numbers[] = { "+86-13812345678", "001-1111111", "123456789", "+44 234567890"};
    regex_t regex;
    regcomp(&regex, "^\\+86-1[3|4|5|6|7|8|9]\\d{9}$", REG_EXTENDED);

    for (int i=0; i<4; i++)
    {
        if (regexec(&regex, phone_numbers[i], 0, NULL, 0) == 0)
        {
            printf("Match found: %s\n", phone_numbers[i]);
        }
    }

    return 0;
}
```

在这个例子中，我们使用了正则表达式"^\\+86-1[3|4|5|6|7|8|9]\\d{9}$"去匹配中国大陆的手机号码。首先，我们使用regcomp()函数将正则表达式编译成可供程序使用的格式，然后使用regexec()函数去匹配每一个手机号码。如果找到匹配项，就会打印出该手机号码。在这个例子中，我们就可以找出"13812345678"是一个有效的手机号码。

## 深入了解正则表达式

正则表达式是一个庞大而复杂的主题，我们无法在这篇文章中涵盖所有内容。不过，让我们来看一些正则表达式的基本语法，以及一些常用的元字符。

- 基本语法：正则表达式由普通字符（字母、数字、标点符号等）和特殊字符（元字符）组成。
- 元字符：元字符是一些特殊的字符，用来表示匹配的规则。例如，"^"表示匹配字符串的起始位置，"$"表示匹配字符串的结尾位置。
- 基本规则：多个普通字符会依次匹配字符串中的每一个字符，[ ]内的字符表示匹配任意一个字符，*表示匹配前面的字符0次或多次，+表示匹配前面的字符1次或多次，?表示匹配前面的字符0次或1次。
- 常用的元字符：除了上面提到的"^"、"$"、"*"、"+"、"?"以外，还有一些常用的元字符，比如"."表示匹配任意一个字符，{ }表示匹配指定次数的字符，|表示"或"操作，\d表示匹配数字，\s表示匹配空白字符。

如果你想深入了解更多关于正则表达式的知识，建议阅读正则表达式的官方文档或其他相关的书籍。

## 查看还有

- [正则表达式教程](https://regexone.com/)
- [正则表达式语法](https://www.regular-expressions.info/wildcards.html)
- [使用正则表达式的示例](https://www.gnu.org/software/gawk/manual/html_node/Regular-Expressions.html)

感谢阅读，希望这篇文章能帮