---
title:    "Rust: 写入标准错误"
keywords: ["Rust"]
---

{{< edit_this_page >}}

为什么：编写标准错误信息是非常重要的，因为它可以帮助程序员调试和诊断程序中的错误。它可以提供更详细的信息，帮助开发者更快地定位和解决bug，从而提高程序的质量和可靠性。

如何进行：使用Rust中的"```eprintln!()```"宏来将信息输出到标准错误流中。注意，与"```println!()```"不同，"```eprintln!()```"会在每次输出后自动换行。下面是一个简单的示例：

```Rust
fn main() {
    let x = 10;
    let y = 5;
    if x > y {
        eprintln!("x是大于y的。"); // 输出到标准错误流中
    }
}
```

输出结果：

```
x是大于y的。
```

深入探讨：除了使用"```eprintln!```"宏来输出信息到标准错误流外，还可以使用"```eprint!()```"宏来输出，它不会自动换行。另外，还可以使用"```writeln!()```"宏来输出带有格式化字符串的信息到标准错误流，使用方法与"```eprintln!```"相同。同时，还可以通过"```std::io::stderr```"来获取标准错误流的句柄，然后使用"```write!()```"宏来写入任意信息。

另外，标准错误流也可以被重定向到其他的输出，如文件或控制台。通过使用"```std::fs::File::create()```"来创建一个文件句柄，然后使用"```std::io::stderr().redirect()```"来重定向标准错误流到该文件。这样，程序运行时的错误信息将会被输出到指定的文件中。

类似地，也可以使用"```std::io::stdout().redirect()```"来重定向标准输出流，或者使用"```std::io::Error::redirect()```"来同时重定向标准错误流和标准输出流到同一个文件中。

请注意，重定向标准错误流会影响到整个程序，因此建议只在必要时使用。否则，将会影响到其他可能依赖标准错误流的部分。

## 参考链接

- [Rust文档：标准库](https://doc.rust-lang.org/std/index.html)
- [Rust文档：标准错误流](https://doc.rust-lang.org/std/io/struct.Stderr.html)
- [Rust官方博客：标准输出和错误流](https://blog.rust-lang.org/2015/04/30/Rust-STD-IO.html)